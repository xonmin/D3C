# 도메인 주도 설계 첫걸음 - part1 : 전략적 설계 

## 01. 비즈니스 도메인 분석하기 

효과적인 솔루션을 설계하고 구축하기 위해서는 그것의 바탕이 되는 **구축해야 하는 SW System**을 이해해야 한다.

### 비즈니스 도메인이란?
비즈니스 도메인 : 기업의 주요 활동 영역 정의 / 회사가 고객에게 제공하는 서비스 
> ex_ 스타벅스 : 커피, 월마트 : 소매업, 페덱스 : 배송 

- 기업은 여러 비즈니스 도메인을 운영 가능 
- 비즈니스 도메인은 자주 변경될 수 있음 

### 하위 도메인이란? 
하위 도메인 : 비즈니스 활동의 세분화된 영역 
- 고객에게 제공하는 서비스 단위로 비즈니스 도메인 생성 
- 각각의 하위 도메인은 서로 상호작용 

> ex_ 스타벅스 : 커피 만드는 일 / 부동산(입지) / 직원 고용 / 재정 관리 

```
비즈니스 도메인 
    ㄴ 하위 도메인 1
    ㄴ 하위 도메인 2   
    ㄴ 하위 도메인 3
    ㄴ ...
```  
  
  
### 하위 도메인 유형 
- 핵심
- 일반
- 지원 


**핵심 하위 도메인(core subdomain)**
- 경쟁사와 다르게 수행하는 것 (ex_ 새로운 서비스 발명 / 기존 프로세스 최적화하여 차별성을 두는 것) 
- 핵심 하위 도메인은 수익에 영향 

> ex_ Uber : 새로운 운송 수단(승차 공유 서비스) / 이후 핵심 비즈니스 최적화 및 발전(같은 방향 동승) 
> ex_ Google : 구글 검색 순위 알고리즘 
> 검색 엔진 : 구글 애즈를 위한 가장 큰 플랫폼 (광고에 대한 중요 구성요소)
> - 구글 애즈(Ads)의 경우 하위 도메인이 아닌 하위 도메인이 있는 별도의 비즈니스 도메인일 뿐 
> - 최적의 검색이 제공되지 않는다면 결국 비즈니스 수익(Ads)에 타격을 입힘 

- 핵심 하위 도메인은 복잡해야 한다. (차별성) 
- 핵심 하위 도메인은 반드시 기술이 들어가야하는 것은 X 
- 우위는 다양한 원천에서 나올 수 있음 
- 사내 내부적 구현 및 요구사항은 자주, 지속적 변경되는 것이 특징 
- 유지보수가 가능하고 쉽게 개선될 수 있어야함 
- 가장 진보된 엔지니어링 기술로 구현되어야 한다 

> **핵심 하위 도메인과 핵심 도메인**
> - 에릭에반스's DDD : 핵심 하위 도메인 = 핵심 도메인 
> - 해당 저자 : 핵심 하위 도메인 선호 
> - cause : 비즈니스 도메인과의 혼동을 피하기 위해 
> - cause : **일반 하위 도메인**이 **핵심 하위 도메인**으로 진화할 수 있기 때문에 더 직관적 


### 일반 하위 도메인(general subdomain)
- 모든 회사가 같은 방식으로 수행하는 비즈니스 활동 
- 이미 검증된 솔루션들을 이용(비용 및 신뢰성 기반 합리적) (더 이상 혁신 / 최적화가 필요 없다) 
- 일반적인 솔루션이기 때문에 타사 대비 경쟁 우위에 영향을 주지 않는다.(해결된 문제들)
- 지원 하위 도메인에 비해 비교적 복잡성 높음 (암호화 알고리즘 / 인증 메커니즘) 
- 
> ex_) 온라인 보석 판매 제조업체 
> - 핵심 하위 : 보석 디자인
> - 일반 하위 : 온라인 쇼핑몰 


### 지원 하위 도메인(supporting subdomain)
- 회사의 비즈니스를 지원하는 활동 
- 진입장벽이 낮고 어떠한 경쟁 우위를 제공하지 않음
- 이미 만들어져있는 일반적 솔루션 사용을 선호 (분명한 해결책이 있는 문제들)
- 차별적 특징 : **솔루션의 비즈니스 로직의 복잡성**
- 일반적으로 지원 하위 도메인의 간단한 비즈니스 로직 : data input, ETL, CRUD 인터페이스, validation  
- 정교한 디자인 패턴 및 고급 엔지니어링 기술이 필요 없음
- RAD (rapid application development) 프레임워크를 통해 우발적 복잡성 없이 로직 구현 충분 
- 핵심 하위 도메인과의 비교 : `하위 도메인을 부업으로 전환할 수 있는가?, 기꺼이 비용을 지불할 수 있는가?` 
  - Y : 핵심
  - N : 지원 
- 일반 하위 도메인과의 비교 : 
  -  if : 외부 솔루션 대비 자체 구축이 저렴 : then 지원 
  -  else : 일반

> ex_) 광고 매칭 및 효과 최적화 관련 광고 회사 
> - 창의적 카탈로그 : 
>   - 저장 및 인덱싱하는 방식은 수익에 영향을 주지 않는다. 
>   - 기업의 광고 관리 및 제공 시스템 구현에 필수적 
>   - **따라서 콘텐츠 카탈로그 솔루션 : 지원 하위 도메인**

<p align="center">
  <img src=https://user-images.githubusercontent.com/27190617/221395210-62b69474-49b2-414b-9abd-6c85f691ccdb.jpeg width=600 height=400 />
  <img src=https://user-images.githubusercontent.com/27190617/221395537-c0dc9dd4-6594-424f-856d-c74261f0ae25.png width=600 height=200 />

</p>


### 하위 도메인 경계 식별 및 정제 
- 부서 및 기타 조직 단위로의 식별 (상대적으로 광범위)
- 광범위하게 나누어진 하위 도메인에 대해 더욱 세분화하여 핵심 하위 / 지원 하위 / 일반 하위 도메인으로 구별하면 좋다. 
- 세분화된 하위 도메인 분석 중단 시점 : **응집된 유스케이스의 집합인 하위 도메인** 을 사용하여 판별 


### 응집된 유스케이스를 하위 도메인으로 
- 기술적 관점 : 하위 도메인은 상호 연관되고 응집된 유스케이스 집합과 유사 
- 더 자세한 분석에도 설계 및 의사결정에 새로운 인사이트가 나오지 않는다면 중단 
- 핵심 하위 도메인에 대해서는 가능한 많이 정제하는 것이 중요 
- 지원 / 일반 하위 도메인에 대해서는 정제 작업 완화 가능 
- 하위 도메인 식별시 **하위 도메인이 모두 필요한지 확인**

### 도메인 전문가 
- 모델링하고 코드로 구현할 비즈니스의 모든 복잡성을 알고 있는 주제 전문가(SW 비즈니스 도메인 권위자) 
- 일반적으로 도메인 전문가 : 요구사항 제시자 / SW 최종 사용자
- SW 는 그들의 문제를 해결해야 한다. 
